{"version":3,"file":"js/784.660a7075.js","mappings":"0LAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,GAAG,MAAQ,OAAO,aAAa,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,IAAI,EAAE,KAAKP,EAAG,aAAa,CAACG,MAAM,CAAC,SAAW,GAAG,MAAQ,QAAQ,WAAa,UAAU,MAAQL,EAAIU,aAAe,eAAe,cAAc,IAAIJ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIQ,QAAQG,KAAK,UAAU,GAAGC,YAAYZ,EAAIa,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAACb,EAAG,WAAW,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,YAAY,EAAEW,OAAM,OAAUd,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,YAAYa,MAAM,CAACC,OAAyB,QAAjBlB,EAAImB,UAAoBb,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIoB,eAAe,MAAM,IAAI,CAACpB,EAAIqB,GAAG,eAAenB,EAAG,MAAM,CAACE,YAAY,YAAYa,MAAM,CAACC,OAAyB,UAAjBlB,EAAImB,UAAsBb,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIoB,eAAe,QAAQ,IAAI,CAACpB,EAAIqB,GAAG,eAAenB,EAAG,MAAM,CAACE,YAAY,YAAYa,MAAM,CAACC,OAAyB,UAAjBlB,EAAImB,UAAsBb,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIoB,eAAe,QAAQ,IAAI,CAACpB,EAAIqB,GAAG,aAAerB,EAAIsB,QAA8PtB,EAAIuB,KAAzPrB,EAAG,MAAM,CAAEF,EAAIwB,QAAQC,OAAS,EAAGvB,EAAG,MAAM,CAACE,YAAY,cAAcJ,EAAI0B,GAAI1B,EAAIwB,SAAS,SAASG,GAAM,OAAOzB,EAAG,YAAY,CAACY,IAAIa,EAAKC,SAASvB,MAAM,CAAC,KAAOsB,IAAO,IAAG,GAAGzB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACJ,EAAIqB,GAAG,2BAAoC,IAC91C,EACIQ,EAAkB,G,oBCyCtB,GACAC,KAAA,YACAC,WAAA,CACAC,UAAAA,EAAAA,GAGAC,IAAAA,GACA,OACAd,SAAA,MACAe,UAAA,EACAV,QAAA,GACAF,SAAA,EAEA,EAEAa,SAAA,CACAzB,WAAAA,GACA,YAAA0B,OAAAC,MAAAC,MACA,GAGAC,QAAA,CAEAnB,cAAAA,CAAAoB,GACA,KAAArB,SAAAqB,EACA,UAAAA,IACA,KAAAhB,QAAA,KAAAA,QAAAiB,MAAA,CAAAC,EAAAC,IACAD,EAAAE,YAAAD,EAAAC,cAGA,GAIA,aAAAC,GACA,MAAAZ,MAAA,KAAAa,UAAAC,EAAAA,EAAAA,IAAA,CACA5B,SAAA,KAAAA,SACA6B,UAAA,EACAC,WAAA,KAAAb,OAAAC,MAAAY,WACAC,UAAA,KAAAd,OAAAC,MAAAC,OACAa,KAAA,IAEA,KAAA3B,QAAAsB,EAAAb,KACA,KAAAT,QAAAC,OAAA,GACA,KAAA2B,OAAA,UAEA,KAAA9B,SAAA,CAEA,GC3F4P,I,UCQxP+B,GAAY,OACd,EACAtD,EACA8B,GACA,EACA,KACA,WACA,MAIF,EAAewB,EAAiB,O,sHChBzB,MAAMN,EAAcO,IACzB,MAAM,SAAEnC,EAAQ,UAAE6B,EAAS,WAAEC,EAAU,UAAEC,EAAS,KAAEC,GAASG,EAC7D,OAAOC,EAAAA,EAAQC,IAAI,cAAe,CAChCC,OAAQ,CACNtC,WACA6B,YACAC,aACAC,YACAC,SAEF,EAISO,EAAgBC,GACpBJ,EAAAA,EAAQC,IAAI,gBAAiB,CAClCC,OAAQ,CACNE,aAMOC,EAAiBA,CAACD,EAASE,IAC/BN,EAAAA,EAAQC,IAAI,oBAAqB,CACtCC,OAAQ,CACNE,UACAE,U","sources":["webpack://shopping_platform/./src/views/search/list.vue","webpack://shopping_platform/src/views/search/list.vue","webpack://shopping_platform/./src/views/search/list.vue?2a3a","webpack://shopping_platform/./src/views/search/list.vue?8e03","webpack://shopping_platform/./src/api/product.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"search\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"商品列表\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('van-search',{attrs:{\"readonly\":\"\",\"shape\":\"round\",\"background\":\"#ffffff\",\"value\":_vm.querySearch || 'Search stuff',\"show-action\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/search')}},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('van-icon',{staticClass:\"tool\",attrs:{\"name\":\"apps-o\"}})]},proxy:true}])}),_c('div',{staticClass:\"sort-btns\"},[_c('div',{staticClass:\"sort-item\",class:{active: _vm.sortType === 'all'},on:{\"click\":function($event){return _vm.handleSortType('all')}}},[_vm._v(\"Relevance\")]),_c('div',{staticClass:\"sort-item\",class:{active: _vm.sortType === 'sales'},on:{\"click\":function($event){return _vm.handleSortType('sales')}}},[_vm._v(\"Top sales\")]),_c('div',{staticClass:\"sort-item\",class:{active: _vm.sortType === 'price'},on:{\"click\":function($event){return _vm.handleSortType('price')}}},[_vm._v(\"Price\")])]),(!_vm.loading)?_c('div',[(_vm.proList.length > 0)?_c('div',{staticClass:\"goods-list\"},_vm._l((_vm.proList),function(item){return _c('GoodsItem',{key:item.goods_id,attrs:{\"item\":item}})}),1):_c('div',{staticClass:\"none-goods\"},[_vm._v(\" 暂无相关产品，请换个关键词试试吧 \")])]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<!-- 商品搜索结果列表页面 -->\n  <div>\n    <div class=\"search\">\n    <van-nav-bar fixed title=\"商品列表\" left-arrow @click-left=\"$router.go(-1)\" />\n\n    <!-- 将输入框的value值绑定querySearch，用于回显搜索关键词在输入框中 -->\n    <van-search\n      readonly\n      shape=\"round\"\n      background=\"#ffffff\"\n      :value=\"querySearch || 'Search stuff'\"\n      show-action\n      @click=\"$router.push('/search')\"\n    >\n      <template #action>\n        <van-icon class=\"tool\" name=\"apps-o\" />\n      </template>\n    </van-search>\n\n    <!-- 排序选项按钮 -->\n    <div class=\"sort-btns\">\n      <div class=\"sort-item\" :class = \"{active: sortType === 'all'}\" @click = \"handleSortType('all')\">Relevance</div>\n      <div class=\"sort-item\" :class = \"{active: sortType === 'sales'}\" @click = \"handleSortType('sales')\">Top sales</div>\n      <div class=\"sort-item\" :class = \"{active: sortType === 'price'}\" @click = \"handleSortType('price')\">Price</div>\n    </div>\n\n    <div v-if = \"!loading\">\n      <div class=\"goods-list\" v-if = \"proList.length > 0\">\n        <GoodsItem v-for=\"item in proList\" :key=\"item.goods_id\" :item = \"item\"></GoodsItem>\n      </div>\n      <div class=\"none-goods\" v-else>\n        暂无相关产品，请换个关键词试试吧\n      </div>\n    </div>\n  </div>\n  </div>\n</template>\n\n<script>\nimport GoodsItem from '@/components/GoodsItem.vue'\nimport { getProList } from '@/api/product'\n\nexport default {\n  name: 'ListIndex',\n  components: {\n    GoodsItem\n  },\n\n  data () {\n    return {\n      sortType: 'all',\n      sortPrice: 0,\n      proList: [],\n      loading: true\n    }\n  },\n\n  computed: {\n    querySearch () {\n      return this.$route.query.search // return传入的搜索参数，即从搜索页面传入的搜索关键词，因为需要回显在此页面的输入框中\n    }\n  },\n\n  methods: {\n    // 定义一个赋值sortType值的方法，用于给当前组件赋值active类名，用于显示css样式\n    handleSortType (newSortType) {\n      this.sortType = newSortType\n      if (newSortType === 'sales') {\n        this.proList = this.proList.sort((a, b) => {\n          return a.goods_sales - b.goods_sales\n        })\n      }\n    }\n  },\n\n  // 在created中调用api请求方法，用于进入页面立即请求数据\n  async created () {\n    const { data: { list } } = await getProList({\n      sortType: this.sortType,\n      SortPrice: 0,\n      categoryId: this.$route.query.categoryId, // 获取页面url携带的传入参数（categoryId）\n      goodsName: this.$route.query.search, // 获取页面url携带的传入参数（search），分为路由传参和查询参数，这是后者\n      page: 1\n    })\n    this.proList = list.data\n    if (this.proList.length < 1) {\n      this.$toast('暂无相关产品')\n    }\n    this.loading = false\n    // console.log(this.proList)\n  }\n}\n</script>\n\n<style lang = \"less\" scoped>\n  .search {\n    padding-top: 46px;\n    ::v-deep .van-icon-arrow-left {\n      color: #333;\n    }\n    .tool {\n      font-size: 24px;\n      height: 40px;\n      line-height: 40px;\n    }\n\n    .sort-btns {\n      display: flex;\n      height: 36px;\n      line-height: 36px;\n      .sort-item {\n        text-align: center;\n        flex: 1;\n        font-size: 16px;\n\n        &.active{\n          color: #e49a3d;\n        }\n      }\n    }\n  }\n\n  .goods-list {\n    background-color: #f6f6f6;\n  }\n  .none-goods {\n    height: 400px;\n    /* background-color: pink; */\n    text-align: center;\n    align-content: center;\n    font-size: 16px;\n    color: gray;\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=5bf8c1a8&scoped=true\"\nimport script from \"./list.vue?vue&type=script&lang=js\"\nexport * from \"./list.vue?vue&type=script&lang=js\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=5bf8c1a8&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5bf8c1a8\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\n// 获取搜索的结果列表数据\nexport const getProList = (obj) => {\n  const { sortType, SortPrice, categoryId, goodsName, page } = obj\n  return request.get('/goods/list', {\n    params: {\n      sortType,\n      SortPrice,\n      categoryId,\n      goodsName,\n      page\n    }\n  })\n}\n\n// 获取商品详情数据\nexport const getProDetail = (goodsId) => {\n  return request.get('/goods/detail', {\n    params: {\n      goodsId\n    }\n  })\n}\n\n// 获取商品评论数据\nexport const getProComments = (goodsId, limit) => {\n  return request.get('/comment/listRows', {\n    params: {\n      goodsId,\n      limit\n    }\n  })\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","querySearch","push","scopedSlots","_u","key","fn","proxy","class","active","sortType","handleSortType","_v","loading","_e","proList","length","_l","item","goods_id","staticRenderFns","name","components","GoodsItem","data","sortPrice","computed","$route","query","search","methods","newSortType","sort","a","b","goods_sales","created","list","getProList","SortPrice","categoryId","goodsName","page","$toast","component","obj","request","get","params","getProDetail","goodsId","getProComments","limit"],"sourceRoot":""}