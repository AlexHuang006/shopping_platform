"use strict";(self["webpackChunkshopping_platform"]=self["webpackChunkshopping_platform"]||[]).push([[784],{7784:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});e(4114);var o=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.querySearch||"Search stuff","show-action":""},on:{click:function(s){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[s("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),s("div",{staticClass:"sort-btns"},[s("div",{staticClass:"sort-item",class:{active:"all"===t.sortType},on:{click:function(s){return t.handleSortType("all")}}},[t._v("Relevance")]),s("div",{staticClass:"sort-item",class:{active:"sales"===t.sortType},on:{click:function(s){return t.handleSortType("sales")}}},[t._v("Top sales")]),s("div",{staticClass:"sort-item",class:{active:"price"===t.sortType},on:{click:function(s){return t.handleSortType("price")}}},[t._v("Price")])]),t.loading?t._e():s("div",[t.proList.length>0?s("div",{staticClass:"goods-list"},t._l(t.proList,(function(t){return s("GoodsItem",{key:t.goods_id,attrs:{item:t}})})),1):s("div",{staticClass:"none-goods"},[t._v(" 暂无相关产品，请换个关键词试试吧 ")])])],1)])},r=[],a=e(7246),i=e(3395),n={name:"ListIndex",components:{GoodsItem:a.A},data(){return{sortType:"all",sortPrice:0,proList:[],loading:!0}},computed:{querySearch(){return this.$route.query.search}},methods:{handleSortType(t){this.sortType=t,"sales"===t&&(this.proList=this.proList.sort(((t,s)=>t.goods_sales-s.goods_sales)))}},async created(){const{data:{list:t}}=await(0,i.Cd)({sortType:this.sortType,SortPrice:0,categoryId:this.$route.query.categoryId,goodsName:this.$route.query.search,page:1});this.proList=t.data,this.proList.length<1&&this.$toast("暂无相关产品"),this.loading=!1}},c=n,l=e(1656),d=(0,l.A)(c,o,r,!1,null,"5bf8c1a8",null),u=d.exports},3395:function(t,s,e){e.d(s,{B7:function(){return a},Cd:function(){return r},Yv:function(){return i}});var o=e(7120);const r=t=>{const{sortType:s,SortPrice:e,categoryId:r,goodsName:a,page:i}=t;return o.A.get("/goods/list",{params:{sortType:s,SortPrice:e,categoryId:r,goodsName:a,page:i}})},a=t=>o.A.get("/goods/detail",{params:{goodsId:t}}),i=(t,s)=>o.A.get("/comment/listRows",{params:{goodsId:t,limit:s}})}}]);
//# sourceMappingURL=784.660a7075.js.map