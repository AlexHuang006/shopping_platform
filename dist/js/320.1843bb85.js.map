{"version":3,"file":"js/320.1843bb85.js","mappings":"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","sources":["webpack://shopping_platform/./src/views/prodetail/index.vue","webpack://shopping_platform/src/views/prodetail/index.vue","webpack://shopping_platform/./src/views/prodetail/index.vue?f133","webpack://shopping_platform/./src/views/prodetail/index.vue?3c54","webpack://shopping_platform/./src/api/product.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"prodetail\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"商品详情\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),(!_vm.loading)?_c('div',[_c('van-swipe',{attrs:{\"autoplay\":3000},on:{\"change\":_vm.onChange},scopedSlots:_vm._u([{key:\"indicator\",fn:function(){return [_c('div',{staticClass:\"custom-indicator\"},[_vm._v(_vm._s(_vm.current + 1)+\" / \"+_vm._s(_vm.images.length))])]},proxy:true}],null,false,3958565683)},_vm._l((_vm.images),function(item,index){return _c('van-swipe-item',{key:index},[_c('img',{attrs:{\"src\":item.external_url}})])}),1),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"price left\"},[_c('span',{staticClass:\"now\"},[_vm._v(\"￥\"+_vm._s(_vm.detail.goods_price_min))]),_c('span',{staticClass:\"oldprice\"},[_vm._v(\"￥\"+_vm._s(_vm.detail.goods_price_max))])]),_c('div',{staticClass:\"sellcount right\"},[_vm._v(\"已售\"+_vm._s(_vm.detail.goods_sales)+\"件\")])]),_c('div',{staticClass:\"msg text-ellipsis-2\"},[_vm._v(\" \"+_vm._s(_vm.detail.goods_name)+\" \")]),_c('div',{staticClass:\"service\"},[_c('div',{staticClass:\"left-words\"},[_c('span',[_c('van-icon',{attrs:{\"name\":\"passed\"}}),_vm._v(\"七天无理由退货\")],1),_c('span',[_c('van-icon',{attrs:{\"name\":\"passed\"}}),_vm._v(\"48小时发货\")],1)]),_c('div',{staticClass:\"right-icon\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)])]),_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"comment-title\"},[_c('div',{staticClass:\"left\"},[_vm._v(\"商品评价 (\"+_vm._s(_vm.total)+\"条)\")]),(_vm.total > 0)?_c('div',{staticClass:\"right\"},[_vm._v(\"查看更多 \"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1):_vm._e()]),_c('div',{staticClass:\"comment-list\"},_vm._l((_vm.commentList),function(item){return _c('div',{key:item.comment_id,staticClass:\"comment-item\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":item.user.avatar_url || _vm.defaultImg,\"alt\":\"\"}}),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.user.nick_name))]),_c('van-rate',{attrs:{\"size\":16,\"value\":item.score / 2,\"color\":\"#ffd21e\",\"void-icon\":\"star\",\"void-color\":\"#eee\"}})],1),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(item.create_time)+\" \")])])}),0)]),_c('div',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(_vm.detail.content)}}),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"icon-home\",on:{\"click\":function($event){return _vm.$router.push('/home')}}},[_c('van-icon',{attrs:{\"name\":\"wap-home-o\"}}),_c('span',[_vm._v(\"Home\")])],1),_c('div',{staticClass:\"icon-cart\",on:{\"click\":function($event){return _vm.$router.push('/cart')}}},[(_vm.cartTotal > 0)?_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.cartTotal > 99 ? '99+' : _vm.cartTotal))]):_vm._e(),_c('van-icon',{attrs:{\"name\":\"shopping-cart-o\"}}),_c('span',[_vm._v(\"Cart\")])],1),_c('div',{staticClass:\"btn-add\",on:{\"click\":_vm.addFn}},[_vm._v(\"Add to cart\")]),_c('div',{staticClass:\"btn-buy\",on:{\"click\":_vm.buyFn}},[_vm._v(\"Buy now\")])]),_c('van-action-sheet',{attrs:{\"title\":_vm.model === 'cart' ? 'Add to cart' : 'Buy now'},model:{value:(_vm.showPanel),callback:function ($$v) {_vm.showPanel=$$v},expression:\"showPanel\"}},[_c('div',{staticClass:\"product\"},[_c('div',{staticClass:\"product-title\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm.detail.goods_image,\"alt\":\"\"}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(\"¥\")]),_c('span',{staticClass:\"nowprice\"},[_vm._v(_vm._s(_vm.detail.goods_price_min))]),_c('span',{staticClass:\"oldprice\"},[_vm._v(\"¥ \"+_vm._s(_vm.detail.goods_price_max))])]),(_vm.detail.stock_total === 0)?_c('div',{staticClass:\"count\"},[_c('span',[_vm._v(\"库存\")]),_c('span',[_vm._v(_vm._s(_vm.detail.stock_total))])]):_vm._e()])]),(_vm.detail.stock_total > 0)?_c('div',{staticClass:\"num-box\"},[_c('span',[_vm._v(\"Qty\")]),_c('CountBox',{attrs:{\"proStock\":_vm.detail.stock_total},model:{value:(_vm.addCount),callback:function ($$v) {_vm.addCount=$$v},expression:\"addCount\"}})],1):_vm._e(),(_vm.detail.stock_total > 0)?_c('div',{staticClass:\"showbtn\"},[(_vm.model === 'cart')?_c('div',{staticClass:\"btn\",on:{\"click\":_vm.addCart}},[_vm._v(\"Add to cart\")]):_c('div',{staticClass:\"btn now\",on:{\"click\":_vm.goBuyNow}},[_vm._v(\"Buy now\")])]):_c('div',{staticClass:\"btn-none\"},[_vm._v(\"Sold out\")])])])],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"prodetail\">\n    <!-- 页面标题 -->\n    <van-nav-bar fixed title=\"商品详情\" left-arrow @click-left=\"$router.go(-1)\" />\n    <div v-if = !loading>\n      <!-- 商品图片 -->\n      <van-swipe :autoplay=\"3000\" @change=\"onChange\">\n        <van-swipe-item v-for=\"(item, index) in images\" :key=\"index\">\n          <img :src=\"item.external_url\" />\n        </van-swipe-item>\n        <!-- 轮播图指示器 -->\n        <template #indicator>\n          <div class=\"custom-indicator\">{{ current + 1 }} / {{ images.length }}</div>\n        </template>\n      </van-swipe>\n\n      <!-- 商品说明 -->\n      <div class=\"info\">\n        <!-- 价格标题 -->\n        <div class=\"title\">\n          <div class=\"price left\">\n            <span class=\"now\">￥{{ detail.goods_price_min }}</span>\n            <span class=\"oldprice\">￥{{ detail.goods_price_max }}</span>\n          </div>\n          <div class=\"sellcount right\">已售{{ detail.goods_sales }}件</div>\n        </div>\n        <!-- 商品名标题 -->\n        <div class=\"msg text-ellipsis-2\">\n          {{ detail.goods_name }}\n        </div>\n\n        <!-- service 说明 -->\n        <div class=\"service\">\n          <div class=\"left-words\">\n            <span><van-icon name=\"passed\" />七天无理由退货</span>\n            <span><van-icon name=\"passed\" />48小时发货</span>\n          </div>\n          <div class=\"right-icon\">\n            <van-icon name=\"arrow\" />\n          </div>\n        </div>\n      </div>\n\n      <!-- 商品评价 -->\n      <div class=\"comment\">\n        <div class=\"comment-title\">\n          <div class=\"left\">商品评价 ({{ total }}条)</div>\n          <div class=\"right\" v-if = \"total > 0\">查看更多 <van-icon name=\"arrow\" /> </div>\n        </div>\n        <div class=\"comment-list\">\n          <div class=\"comment-item\" v-for=\"item in commentList\" :key=\"item.comment_id\">\n            <div class=\"top\">\n              <img :src=\"item.user.avatar_url || defaultImg\" alt=\"\">\n              <div class=\"name\">{{ item.user.nick_name }}</div>\n              <van-rate :size=\"16\" :value=\"item.score / 2\" color=\"#ffd21e\" void-icon=\"star\" void-color=\"#eee\"/>\n            </div>\n            <div class=\"content\">\n              {{ item.content }}\n            </div>\n            <div class=\"time\">\n              {{ item.create_time }}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 商品描述 -->\n      <div class=\"desc\" v-html = \"detail.content\">\n      </div>\n\n      <!-- 底部 -->\n      <div class=\"footer\">\n        <div class=\"icon-home\"  @click = \"$router.push('/home')\">\n          <van-icon name=\"wap-home-o\"/>\n          <span>Home</span>\n        </div>\n        <div class=\"icon-cart\" @click = \"$router.push('/cart')\">\n          <!-- 添加购物车显示商品数量角标的图标，且有商品时，显示此图标-->\n          <span v-if = \"cartTotal > 0\" class=\"num\">{{ cartTotal > 99 ? '99+' : cartTotal  }}</span>\n          <van-icon name=\"shopping-cart-o\" />\n          <span>Cart</span>\n        </div>\n        <!-- 点击‘Add to cart’按钮，打开购物车弹窗 -->\n        <div @click = \"addFn\" class=\"btn-add\">Add to cart</div>\n        <!-- 点击‘Buy now’按钮，打开立即购买的购物车弹窗 -->\n        <div @click = \"buyFn\" class=\"btn-buy\">Buy now</div>\n      </div>\n\n      <!-- 购物车弹层 -->\n      <van-action-sheet v-model = \"showPanel\" :title = \"model === 'cart' ? 'Add to cart' : 'Buy now'\">\n        <div class=\"product\">\n          <div class=\"product-title\">\n            <div class=\"left\">\n              <img :src=\"detail.goods_image\" alt=\"\">\n            </div>\n            <div class=\"right\">\n              <div class=\"price\">\n                <span>¥</span>\n                <span class=\"nowprice\">{{ detail.goods_price_min }}</span>\n                <span class=\"oldprice\">¥ {{ detail.goods_price_max }}</span>\n              </div>\n              <div class=\"count\" v-if = \"detail.stock_total === 0\">\n                <span>库存</span>\n                <span>{{ detail.stock_total }}</span>\n              </div>\n            </div>\n          </div>\n          <!-- 库存大于0时，选择显示组件 -->\n          <div class=\"num-box\" v-if = \"detail.stock_total > 0\">\n            <span>Qty</span>\n            <!-- 3. 使用通用子组件CountBox -->\n            <!-- v-model绑定组件，因为v-model包含value和@input，并将父组件的value数据传递给子组件CountBox -->\n            <!-- 将父组件的proStock数据传递给子组件CountBox -->\n            <CountBox v-model = \"addCount\" :proStock = \"detail.stock_total\"></CountBox>\n          </div>\n          <div class=\"showbtn\" v-if=\"detail.stock_total > 0\">\n            <!-- determine whether user has already signed in? -->\n            <div class=\"btn\" v-if=\"model === 'cart'\" @click = \"addCart\">Add to cart</div>\n            <div class=\"btn now\" v-else @click = \"goBuyNow\">Buy now</div>\n          </div>\n          <div class=\"btn-none\" v-else>Sold out</div>\n        </div>\n      </van-action-sheet>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getProDetail, getProComments } from '@/api/product'\nimport defaultImg from '@/assets/default-avatar.png'\nimport CountBox from '@/components/CountBox.vue' // 1. 引入子组件CountBox\nimport { addCart } from '@/api/cart' // 引入‘加入购物车’方法\nimport { mapGetters } from 'vuex'\nimport loginConfirm from '@/mixins/loginConfirm'\n\nexport default {\n  name: 'ProDetailIndex',\n  mixins: [loginConfirm],\n  components: {\n    CountBox // 2. 注册组组件CountBox\n  },\n  data () {\n    return {\n      current: 0, // 用于配合轮播图indicator数标\n      images: [], // 用于储存轮播图图片数据\n      detail: [], // 商品详情信息\n      total: 0, // 此商品的评论总数量\n      commentList: [], // 评论内容列表\n      defaultImg, // 评论中用户默认头像图片\n      loading: true, // 配合页面数据加载\n      showPanel: false, // 配合购物车弹窗\n      model: 'cart', // 配合显示购物车弹窗的模式\n      addCount: 1 // 购买此商品的数量\n    }\n  },\n\n  computed: {\n    goodsId () { // define一个获取页面路径中传入参数的方法\n      return this.$route.params.id // 这是动态路由参数，获取参数\n    },\n\n    ...mapGetters('cart', ['cartTotal']) // 使用辅助函数从vuex中的cart模块中使用cartList的计算属性\n  },\n\n  created () {\n    // 因为此页面中，在进入created生命周期时，需要请求多个后台数据，所以将请求方法写入到methods中。\n    this.getDetail()\n    this.getComments()\n\n    if (this.$store.getters.token) {\n      this.$store.dispatch('cart/getCartAction') // 在组件的方法中调用 dispatch， dispatch 触发actions中的异步方法，获取数据购物车数据\n    }\n  },\n\n  methods: {\n    // onChange方法用于匹配轮播图和指示器对应数\n    onChange (index) {\n      this.current = index\n    },\n\n    // 请求商品详情方法\n    async getDetail () {\n      const { data: { detail } } = await getProDetail(this.goodsId)\n      this.detail = detail\n      this.images = detail.goods_images\n      // console.log(this.detail)\n    },\n\n    // 请求商品评价方法\n    async getComments () {\n      const { data: { list, total } } = await getProComments(this.goodsId, 3)\n      this.commentList = list\n      this.total = total\n      this.loading = false\n      // console.log(list)\n    },\n\n    // determine which popup should be open\n    addFn () {\n      this.model = 'cart'\n      this.showPanel = true\n    },\n\n    // determine which popup should be open\n    buyFn () {\n      this.model = 'butNow'\n      this.showPanel = true\n    },\n\n    // 添加到购物车方法\n    async addCart () {\n      // 从全局的vuex里面拿到存进去的用户token数据\n      // 1. 如果用户未登录,则弹窗引导用户登录\n      if (this.loginConfirm()) {\n        return\n      }\n      // 2. 已登录用户，则将商品添加到购物车中\n      await addCart(this.goodsId, this.addCount, this.detail.skuList[0].goods_sku_id)\n      // const { data } = await addCart(this.goodsId, this.addCount, this.detail.skuList[0].goods_sku_id)\n      // this.cartTotal = data.cartTotal\n      this.$store.dispatch('cart/getCartAction')\n      this.$toast('添加成功')\n      this.showPanel = false\n      // console.log(data)\n    },\n\n    // 订单结算BuyNow\n    goBuyNow () {\n      // 判断用户是否登录\n      if (this.loginConfirm()) {\n        return\n      }\n      this.$router.push({\n        path: '/pay',\n        query: {\n          mode: 'buyNow',\n          goodsId: this.goodsId,\n          goodsSkuId: this.detail.skuList[0].goods_sku_id,\n          goodsNum: this.addCount\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang = \"less\" scoped>\n  .prodetail {\n    padding-top: 46px;\n    ::v-deep .van-icon-arrow-left {\n      color: #333;\n    }\n    img {\n      display: block;\n      width: 100%;\n    }\n    .custom-indicator {\n      position: absolute;\n      right: 10px;\n      bottom: 10px;\n      padding: 5px 10px;\n      font-size: 12px;\n      background: rgba(0, 0, 0, 0.1);\n      border-radius: 15px;\n    }\n    .desc {\n      width: 100%;\n      overflow: scroll;\n      ::v-deep img {\n        display: block;\n        width: 100%!important;\n      }\n    }\n    .info {\n      padding: 10px;\n    }\n    .title {\n      display: flex;\n      justify-content: space-between;\n      .now {\n        color: #fa2209;\n        font-size: 20px;\n      }\n      .oldprice {\n        color: #959595;\n        font-size: 16px;\n        text-decoration: line-through;\n        margin-left: 5px;\n      }\n      .sellcount {\n        color: #959595;\n        font-size: 16px;\n        position: relative;\n        top: 4px;\n      }\n    }\n    .msg {\n      font-size: 16px;\n      line-height: 24px;\n      margin-top: 5px;\n    }\n    .service {\n      display: flex;\n      justify-content: space-between;\n      line-height: 40px;\n      margin-top: 10px;\n      font-size: 16px;\n      background-color: #fafafa;\n      .left-words {\n        span {\n          margin-right: 10px;\n        }\n        .van-icon {\n          margin-right: 4px;\n          color: #fa2209;\n        }\n      }\n    }\n\n    .comment {\n      padding: 10px;\n    }\n    .comment-title {\n      display: flex;\n      justify-content: space-between;\n      .right {\n        color: #959595;\n      }\n    }\n\n    .comment-item {\n      font-size: 16px;\n      line-height: 30px;\n      .content {\n          width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      .top {\n        height: 30px;\n        display: flex;\n        align-items: center;\n        margin-top: 20px;\n        img {\n          width: 20px;\n          height: 20px;\n        }\n        .name {\n          margin: 0 10px;\n        }\n      }\n      .time {\n        color: #999;\n      }\n    }\n\n    .footer {\n      position: fixed;\n      left: 0;\n      bottom: 0;\n      width: 100%;\n      height: 55px;\n      background-color: #fff;\n      border-top: 1px solid #ccc;\n      display: flex;\n      justify-content: space-evenly;\n      align-items: center;\n      .icon-home, .icon-cart {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        font-size: 14px;\n        .van-icon {\n          font-size: 24px;\n        }\n      }\n      .icon-cart {\n        position: relative;\n        padding: 0 6px;\n        /* background-color: pink; */\n        .num {\n          z-index: 999;\n          position: absolute;\n          width: 25px;\n          top: -3px;\n          right: -10px;\n          /* min-width: 16px; */\n          padding: 3px;\n          color: #fff;\n          text-align: center;\n          background-color: #ee0a24;\n          border-radius: 10px;\n          font-size: 10px;\n        }\n      }\n      .btn-add,\n      .btn-buy {\n        height: 36px;\n        line-height: 36px;\n        width: 120px;\n        border-radius: 18px;\n        background-color: #ffa900;\n        text-align: center;\n        color: #fff;\n        font-size: 14px;\n      }\n      .btn-buy {\n        background-color: #fe5630;\n      }\n    }\n  }\n\n  .tips {\n    padding: 10px;\n  }\n\n  .product {\n    .product-title {\n      display: flex;\n      .left {\n        img {\n          width: 90px;\n          height: 90px;\n        }\n        margin: 10px;\n      }\n      .right {\n        flex: 1;\n        padding: 10px;\n        .price {\n          font-size: 14px;\n          color: #fe560a;\n          .nowprice {\n            font-size: 24px;\n            margin: 0 5px;\n          }\n          .oldprice {\n            display: block;\n            color: #959595;\n            font-size: 16px;\n            text-decoration: line-through;\n          }\n        }\n      }\n    }\n\n    .num-box {\n      display: flex;\n      justify-content: space-between;\n      padding: 10px;\n      align-items: center;\n    }\n\n    .btn, .btn-none {\n      height: 40px;\n      line-height: 40px;\n      margin: 20px;\n      border-radius: 20px;\n      text-align: center;\n      color: rgb(255, 255, 255);\n      background-color: rgb(255, 148, 2);\n    }\n    .btn.now {\n      background-color: #fe5630;\n    }\n    .btn-none {\n      background-color: #cccccc;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5e7268e4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5e7268e4&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e7268e4\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\n// 获取搜索的结果列表数据\nexport const getProList = (obj) => {\n  const { sortType, SortPrice, categoryId, goodsName, page } = obj\n  return request.get('/goods/list', {\n    params: {\n      sortType,\n      SortPrice,\n      categoryId,\n      goodsName,\n      page\n    }\n  })\n}\n\n// 获取商品详情数据\nexport const getProDetail = (goodsId) => {\n  return request.get('/goods/detail', {\n    params: {\n      goodsId\n    }\n  })\n}\n\n// 获取商品评论数据\nexport const getProComments = (goodsId, limit) => {\n  return request.get('/comment/listRows', {\n    params: {\n      goodsId,\n      limit\n    }\n  })\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","loading","_e","onChange","scopedSlots","_u","key","fn","_v","_s","current","images","length","proxy","_l","item","index","external_url","detail","goods_price_min","goods_price_max","goods_sales","goods_name","total","commentList","comment_id","user","avatar_url","defaultImg","nick_name","score","content","create_time","domProps","push","cartTotal","addFn","buyFn","model","value","showPanel","callback","$$v","expression","goods_image","stock_total","addCount","addCart","goBuyNow","staticRenderFns","name","mixins","loginConfirm","components","CountBox","data","computed","goodsId","$route","params","id","mapGetters","created","getDetail","getComments","$store","getters","token","dispatch","methods","getProDetail","goods_images","list","getProComments","skuList","goods_sku_id","$toast","path","query","mode","goodsSkuId","goodsNum","component","getProList","obj","sortType","SortPrice","categoryId","goodsName","page","request","get","limit"],"sourceRoot":""}